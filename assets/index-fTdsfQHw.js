(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(s){if(s.ep)return;s.ep=!0;const c=o(s);fetch(s.href,c)}})();const l=30,Y=l*4,h=document.querySelector("#canvas");h.width=window.innerWidth;h.height=window.innerHeight;const e=h.getContext("2d");Array.prototype.up=function(t){return this.push(this[this.length-2],this[this.length-1]+t),this};Array.prototype.down=function(t){return this.push(this[this.length-2],this[this.length-1]-t),this};Array.prototype.left=function(t){return this.push(this[this.length-2]-t,this[this.length-1]),this};Array.prototype.right=function(t){return this.push(this[this.length-2]+t,this[this.length-1]),this};const C=[453,549,453,548,451,548,451,547,450,547,450,546,449,546,449,543,448,543,448,450,449,450,449,448,450,448,450,447,451,447,451,446,453,446,454,446,454,445,547,445,547,445,547,446,550,446,550,447,551,447,551,448,552,448,552,545,551,545,551,546,550,546,550,547,549,547,549,548,547,548,547,549],T=[499,497],D=[474,549].right(73).down(1).right(2).down(1).right(1).down(1).right(1).down(1).right(1).down(35).right(34).down(1).right(3).down(1).right(1).down(1).right(2).down(1).right(1).down(1).right(1).down(1).right(2).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(2).down(1).right(1).down(1).right(1).down(1).right(4).down(1).right(40).up(1).right(3).up(1).right(2).up(1).right(1).up(1).right(2).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(2).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(2).right(1).up(4).left(1).up(3).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(2).left(1).up(1).left(1).up(1).left(1).up(2).left(1).up(3).left(1).up(52).left(1).up(5).left(1).up(1).left(1).up(2).left(1).up(1).left(1).up(1).left(1).up(2).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(2).up(1).left(1).up(1).left(2).up(1).left(2).up(1).left(2).up(1).left(3).up(1).left(72).down(1).left(5).down(2).left(1).down(2).left(1).down(14).left(1).down(2).left(1).down(2).left(1).down(1).left(33).down(2).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(5).right(2).down(2).right(1);h.addEventListener("wheel",t=>{t.ctrlKey?_(t.deltaY>0?.01:-.01):t.shiftKey?N(t.deltaY/8,t.deltaX/8):N(t.deltaX/8,t.deltaY/8)});const u=["_"];window.addEventListener("keyup",t=>{const n=Number(t.key);if(isNaN(n)){if(t.code=="Enter"){if(u[u.length-1]=u[u.length-1].slice(0,-1),u.length==2){const[o,r]=u.splice(0,2);A(w(Number(o)),m(Number(r)))}u.push("_")}else if(t.code=="Backspace")if(u[0]==="_")k();else{const o=u[u.length-1];u[u.length-1]=o.slice(0,-2)+"_"}else if(t.code=="Delete")u[0]==="_"&&k();else if(t.code=="Escape"){if(u[0]==="_"){for(let o=0;o<i.length;o++)i[o][3]=!1;return}u.length=0,u.push("_")}else if(t.code=="KeyA"&&t.ctrlKey)for(let o=0;o<i.length;o++)i[o][3]=!0}else{const o=u[u.length-1];u[u.length-1]=o.slice(0,-1)+n+"_"}});window.addEventListener("keydown",t=>{let n=0,o=0;if(t.code==="ArrowUp"){if(i.some(r=>r[3]))return X(0,1);o=f*-30}else if(t.code==="ArrowDown"){if(i.some(r=>r[3]))return X(0,-1);o=f*l}else if(t.code==="ArrowRight"){if(i.some(r=>r[3]))return X(1,0);n=f*l}else if(t.code==="ArrowLeft"){if(i.some(r=>r[3]))return X(-1,0);n=f*-30}else if(t.ctrlKey){if(t.code=="Equal"||t.code=="NumpadAdd"){_(.2),t.preventDefault();return}else if(t.code=="Minus"||t.code=="NumpadSubtract"){_(-.2),t.preventDefault();return}return}else return;t.ctrlKey&&(n*=10,o*=10),t.shiftKey&&(n*=10,o*=10),N(n,o)});function X(t,n){const o=new Array(i.length);for(let r=0;r<i.length;r++){if(!i[r][3]){o[r]=i[r];continue}const s=$(i[r][0],i[r][1],T[0],T[1]);o[r]=[i[r][0]+t,i[r][1]+n,s.toFixed(1),i[r][3]]}i.splice(0,i.length,...o)}let S=0,x=0;h.addEventListener("mousemove",t=>{S=t.x,x=t.y});let M=null,P=null;h.addEventListener("mousedown",t=>{M=t.x,P=t.y});const i=q();h.addEventListener("mouseup",t=>{const[n,o]=y(M,P);M=null,P=null;const r=F(n),s=L(o),[c,a]=y(t.x,t.y),b=F(c),d=L(a);r===b&&s===d&&R(b,d)||I(r,s,b,d)});function q(){const t=new URLSearchParams(window.location.search);let n;try{n=JSON.parse(localStorage.getItem("v0.0.1.bases")),n.map(o=>(o[3]=!1,o))}catch{n=[]}try{if(t.has("bases")&&(n.length===0||confirm("Clicking OK will overwrite your existing bases")))return JSON.parse(t.get("bases"))}catch{}return n}function I(t,n,o,r){const s=Math.min(t,o),c=Math.min(n,r),a=Math.max(t,o),b=Math.max(n,r);for(let d=0;d<i.length;d++){const[O,E]=i[d];i[d][3]=O+1>=s&&O-1<=a&&E+1>=c&&E-1<=b}}function R(t,n){if(t===0||t===999||n===0||n===999)return!1;for(let r=0;r<i.length;r++){const[s,c]=i[r];if(Math.abs(t-s)<3&&Math.abs(n-c)<3)return!1}const o=$(t,n,T[0],T[1]);return i.push([t,n,o.toFixed(1),!1]),localStorage.setItem("v0.0.1.bases",JSON.stringify(i)),!0}function k(){for(let t=0;t<i.length;t++){const[n,o,r,s]=i[t];s&&(i.splice(t,1),t--)}localStorage.setItem("v0.0.1.bases",JSON.stringify(i))}function U(){if(f<.2){e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(l*1e3,0),e.lineTo(l*1e3,l*1e3),e.lineTo(0,l*1e3),e.closePath(),e.lineWidth=10,e.stroke(),e.restore();return}e.beginPath();for(let t=0;t<1001;t++)e.moveTo(l*t,0),e.lineTo(l*t,l*1e3);for(let t=0;t<1001;t++)e.moveTo(0,l*t),e.lineTo(l*1e3,l*t);e.closePath(),e.stroke()}function B(t,n){e.save(),e.lineWidth=Math.min(10/f,50),e.strokeStyle=n,e.beginPath(),e.moveTo(w(t[0]),m(t[1]));for(let o=2;o<t.length;o+=2)e.lineTo(w(t[o]),m(t[o+1]));e.closePath(),e.clip(),e.stroke(),e.restore()}function W(t,n,o){e.save(),e.fillStyle=o,e.fillRect(w(t),m(n),l,l),e.restore()}function J(){B(C,"#FFC107"),W(T[0],T[1],"#FFC107")}function v(){const[t,n]=y(S,x);t>0&&t<f*l*1e3&&n>0&&n<f*l*1e3&&e.strokeText(`(${F(t)}, ${L(n)})`,t,n)}function G(){if(M===null||P===null)return;const[t,n]=y(M,P),[o,r]=y(S,x);e.save(),e.beginPath(),e.moveTo(t,n),e.lineTo(t,r),e.lineTo(o,r),e.lineTo(o,n),e.closePath(),e.fillStyle="#2196f320",e.fill(),e.strokeStyle="#2196f3",e.stroke(),e.restore()}function H(){if(u[0]==="_")return;const[t,n]=y(10,h.height-40);e.fillRect(t,n,150,30),e.save(),e.fillStyle="#fff",e.fillText(`x: ${u[0]}, y: ${u[1]??""}`,t+10,n+20),e.restore()}function z(){e.save();for(let t=0;t<i.length;t++){const[n,o,r,s]=i[t];e.fillStyle="#000",e.beginPath();const c=w(n)-l/2-l/4,a=m(o)-l/2-l/4;e.moveTo(c,a),e.lineTo(c+l*2.5,a),e.lineTo(c+l*2.5,a+l*2.5),e.lineTo(c,a+l*2.5),e.closePath(),e.fill(),e.lineWidth=5,e.strokeStyle="#2196f3",s&&e.stroke(),!(f<.5)&&(e.fillStyle="#fff",e.fillText(r,w(n)+l/2-10,m(o)+l/2),e.fillText(`
x: ${n}, y: ${o}`,w(n)+l/2-32,m(o)+l/2+10))}e.restore()}function K(){e.clearRect(-120,-120,f*l*1e3+2*Y,f*l*1e3+2*Y),e.scale(f,f),U(),J(),B(D,"#2196F3"),z(),e.scale(1/f,1/f),v(),G(),H(),requestAnimationFrame(K)}requestAnimationFrame(K);let p=0,g=0;const Q=()=>f*l*1e3+Y-h.width,j=()=>f*l*1e3+Y-h.height;function A(t,n){N(t-p,n-g)}function N(t,n){const o=p;p=Math.round(Math.max(-120,Math.min(Q(),p+t)));const r=g;g=Math.round(Math.max(-120,Math.min(j(),g+n))),e.translate(o-p,r-g)}function y(t,n){return[t+p,n+g]}setInterval(()=>window.location.hash=`${p},${g},${f}`,500);setTimeout(()=>{const[t,n,o]=window.location.hash.slice(1).split(",");_((Number(o)||1)-f),A(Number(t)||0,Number(n)||0)});let f=1;function _(t){let[n,o]=y(0,0);n+=S,o+=x,n/=f,o/=f,f=Math.max(.05,Math.min(2.5,f+t)),A(0,0),A(f*n-S,f*o-x)}function $(t,n,o,r){return Math.sqrt((t-o)**2+(n-r)**2)}function w(t){return t*l}function F(t){return Math.floor(t/l/f)}function m(t){return(999-t)*l}function L(t){return 999-Math.floor(t/l/f)}
