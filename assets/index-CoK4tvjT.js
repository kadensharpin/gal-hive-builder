(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function o(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=o(l);fetch(l.href,u)}})();const r=30,P=r*4,a=document.querySelector("#canvas");a.width=window.innerWidth;a.height=window.innerHeight;const e=a.getContext("2d");Array.prototype.up=function(t){return this.push(this[this.length-2],this[this.length-1]+t),this};Array.prototype.down=function(t){return this.push(this[this.length-2],this[this.length-1]-t),this};Array.prototype.left=function(t){return this.push(this[this.length-2]-t,this[this.length-1]),this};Array.prototype.right=function(t){return this.push(this[this.length-2]+t,this[this.length-1]),this};const $=[453,549,453,548,451,548,451,547,450,547,450,546,449,546,449,543,448,543,448,450,449,450,449,448,450,448,450,447,451,447,451,446,453,446,454,446,454,445,547,445,547,445,547,446,550,446,550,447,551,447,551,448,552,448,552,545,551,545,551,546,550,546,550,547,549,547,549,548,547,548,547,549],X=[499,497],B=[474,549].right(73).down(1).right(2).down(1).right(1).down(1).right(1).down(1).right(1).down(35).right(34).down(1).right(3).down(1).right(1).down(1).right(2).down(1).right(1).down(1).right(1).down(1).right(2).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(1).down(1).right(2).down(1).right(1).down(1).right(1).down(1).right(4).down(1).right(40).up(1).right(3).up(1).right(2).up(1).right(1).up(1).right(2).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(2).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(1).right(1).up(2).right(1).up(4).left(1).up(3).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(2).left(1).up(1).left(1).up(1).left(1).up(2).left(1).up(3).left(1).up(52).left(1).up(5).left(1).up(1).left(1).up(2).left(1).up(1).left(1).up(1).left(1).up(2).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(1).up(1).left(2).up(1).left(1).up(1).left(2).up(1).left(2).up(1).left(2).up(1).left(3).up(1).left(72).down(1).left(5).down(2).left(1).down(2).left(1).down(14).left(1).down(2).left(1).down(2).left(1).down(1).left(33).down(2).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(1).left(1).down(5).right(2).down(2).right(1);a.addEventListener("wheel",t=>{t.ctrlKey?N(t.deltaY>0?.01:-.01):t.shiftKey?A(t.deltaY/8,t.deltaX/8):A(t.deltaX/8,t.deltaY/8)});const f=["_"];window.addEventListener("keyup",t=>{const n=Number(t.key);if(isNaN(n)){if(t.code=="Enter"){if(f[f.length-1]=f[f.length-1].slice(0,-1),f.length==2){const[o,i]=f.splice(0,2);Y(w(Number(o)),m(Number(i)))}f.push("_")}else if(t.code=="Backspace")if(f[0]==="_")F();else{const o=f[f.length-1];f[f.length-1]=o.slice(0,-2)+"_"}else if(t.code=="Escape")f.length=0,f.push("_");else if(t.code=="Delete")f[0]==="_"&&F();else if(t.code=="KeyA"&&t.ctrlKey)for(let o=0;o<c.length;o++)c[o][3]=!0}else{const o=f[f.length-1];f[f.length-1]=o.slice(0,-1)+n+"_"}});window.addEventListener("keydown",t=>{let n=0,o=0;if(t.code==="ArrowUp")o=-30;else if(t.code==="ArrowDown")o=r;else if(t.code==="ArrowRight")n=r;else if(t.code==="ArrowLeft")n=-30;else if(t.ctrlKey){if(t.code=="Equal"||t.code=="NumpadAdd"){N(.2),t.preventDefault();return}else if(t.code=="Minus"||t.code=="NumpadSubtract"){N(-.2),t.preventDefault();return}return}else return;t.ctrlKey&&(n*=10,o*=10),t.shiftKey&&(n*=10,o*=10),A(n,o)});let S=0,x=0;a.addEventListener("mousemove",t=>{S=t.x,x=t.y});let T=null,M=null;a.addEventListener("mousedown",t=>{T=t.x,M=t.y});const c=D();a.addEventListener("mouseup",t=>{const[n,o]=y(T,M);T=null,M=null;const i=_(n),l=L(o),[u,d]=y(t.x,t.y),b=_(u),h=L(d);if(i!==b||l!==h){q(i,l,b,h);return}C(b,h)});function D(){const t=new URLSearchParams(window.location.search);let n;try{n=JSON.parse(localStorage.getItem("v0.0.1.bases")),n.map(o=>(o[3]=!1,o))}catch{n=[]}try{if(t.has("bases")&&(n.length===0||confirm("Clicking OK will overwrite your existing bases")))return JSON.parse(t.get("bases"))}catch{}return n}function q(t,n,o,i){const l=Math.min(t,o),u=Math.min(n,i),d=Math.max(t,o),b=Math.max(n,i);for(let h=0;h<c.length;h++){const[O,E]=c[h];c[h][3]=O>=l&&O<=d&&E>=u&&E<=b}}function C(t,n){if(t===0||t===999||n===0||n===999)return;for(let i=0;i<c.length;i++){const[l,u]=c[i];if(Math.abs(t-l)<3&&Math.abs(n-u)<3)return}const o=Q(t,n,X[0],X[1]);c.push([t,n,o.toFixed(1),!1]),localStorage.setItem("v0.0.1.bases",JSON.stringify(c))}function F(){for(let t=0;t<c.length;t++){const[n,o,i,l]=c[t];l&&(c.splice(t,1),t--)}localStorage.setItem("v0.0.1.bases",JSON.stringify(c))}function I(){if(s<.2){e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(r*1e3,0),e.lineTo(r*1e3,r*1e3),e.lineTo(0,r*1e3),e.closePath(),e.lineWidth=10,e.stroke(),e.restore();return}e.beginPath();for(let t=0;t<1001;t++)e.moveTo(r*t,0),e.lineTo(r*t,r*1e3);for(let t=0;t<1001;t++)e.moveTo(0,r*t),e.lineTo(r*1e3,r*t);e.closePath(),e.stroke()}function k(t,n){e.save(),e.lineWidth=Math.min(10/s,50),e.strokeStyle=n,e.beginPath(),e.moveTo(w(t[0]),m(t[1]));for(let o=2;o<t.length;o+=2)e.lineTo(w(t[o]),m(t[o+1]));e.closePath(),e.clip(),e.stroke(),e.restore()}function R(t,n,o){e.save(),e.fillStyle=o,e.fillRect(w(t),m(n),r,r),e.restore()}function U(){k($,"#FFC107"),R(X[0],X[1],"#FFC107")}function W(){const[t,n]=y(S,x);t>0&&t<s*r*1e3&&n>0&&n<s*r*1e3&&e.strokeText(`(${_(t)}, ${L(n)})`,t,n)}function J(){if(T===null||M===null)return;const[t,n]=y(T,M),[o,i]=y(S,x);e.save(),e.beginPath(),e.moveTo(t,n),e.lineTo(t,i),e.lineTo(o,i),e.lineTo(o,n),e.closePath(),e.fillStyle="#2196f320",e.fill(),e.strokeStyle="#2196f3",e.stroke(),e.restore()}function v(){if(f[0]==="_")return;const[t,n]=y(10,a.height-40);e.fillRect(t,n,150,30),e.save(),e.fillStyle="#fff",e.fillText(`x: ${f[0]}, y: ${f[1]??""}`,t+10,n+20),e.restore()}function G(){e.save();for(let t=0;t<c.length;t++){const[n,o,i,l]=c[t];e.beginPath(),e.ellipse(w(n)+r/2,m(o)+r/2,r*1.25,r*1.25,0,0,360),e.closePath(),e.fillStyle="#000",e.fill(),e.lineWidth=5,e.strokeStyle="#2196f3",l&&e.stroke(),!(s<.5)&&(e.fillStyle="#fff",e.fillText(i,w(n)+r/2-10,m(o)+r/2),e.fillText(`
x: ${n}, y: ${o}`,w(n)+r/2-32,m(o)+r/2+10))}e.restore()}function K(){e.clearRect(-120,-120,s*r*1e3+2*P,s*r*1e3+2*P),e.scale(s,s),I(),U(),k(B,"#2196F3"),G(),e.scale(1/s,1/s),W(),J(),v(),requestAnimationFrame(K)}requestAnimationFrame(K);let p=0,g=0;const H=()=>s*r*1e3+P-a.width,z=()=>s*r*1e3+P-a.height;function Y(t,n){A(t-p,n-g)}function A(t,n){const o=p;p=Math.round(Math.max(-120,Math.min(H(),p+t)));const i=g;g=Math.round(Math.max(-120,Math.min(z(),g+n))),e.translate(o-p,i-g)}function y(t,n){return[t+p,n+g]}setInterval(()=>window.location.hash=`${p},${g},${s}`,500);setTimeout(()=>{const[t,n,o]=window.location.hash.slice(1).split(",");N((Number(o)||1)-s),Y(Number(t)||0,Number(n)||0)});let s=1;function N(t){let[n,o]=y(0,0);n+=S,o+=x,n/=s,o/=s,s=Math.max(.05,Math.min(2.5,s+t)),Y(0,0),Y(s*n-S,s*o-x)}function Q(t,n,o,i){return Math.sqrt((t-o)**2+(n-i)**2)}function w(t){return t*r}function _(t){return Math.floor(t/r/s)}function m(t){return(999-t)*r}function L(t){return 999-Math.floor(t/r/s)}
